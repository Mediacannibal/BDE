<!DOCTYPE html><html lang="en"><head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-157352486-1"></script><script>window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-157352486-1');</script><title>MC BDE</title><meta name="google-site-verification" content="wXopyExZq8koLZmUF4Luqcvwb95AK20FLi3-lBJFkJ0"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Square Dashboard: React Single Page Application"><script src="https://apis.google.com/js/client:platform.js"></script><script src="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.js"></script><link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.css"><link rel="shortcut icon" href="./logo.svg"></head><style>body {
        font-family: Barlow;
    }</style><body><div id="root"></div><div id="modal"></div><script>!function (e, a, t, n, g, c, o) { e.GoogleAnalyticsObject = g, e.ga = e.ga || function () { (e.ga.q = e.ga.q || []).push(arguments) }, e.ga.l = 1 * new Date, c = a.createElement(t), o = a.getElementsByTagName(t)[0], c.async = 1, c.src = "https://www.google-analytics.com/analytics.js", o.parentNode.insertBefore(c, o) }(window, document, "script", 0, "ga"), ga("create", "UA-37045209-2", "auto"), ga("send", "pageview")</script><script type="text/javascript" src="./main~c5b24172.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~253ae210.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~0f485567.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~e0f7d667.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~1fb195ae.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~0f08bdbc.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~b85af4ba.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~e4173fa2.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~7274e1de.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~0fa8f174.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~04b86286.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~fc2f81ef.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~d21988b8.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~31c671ca.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~4e44fb25.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~72f93981.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~db300d2f.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~2f426a33.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~1f20a385.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~7d359b94.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~538051b5.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~3daa2673.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~724d3aa1.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~53bd17ed.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~e258e298.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~8eeb4602.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~7db804d5.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~15f0789d.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~cc99a214.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~b58f7129.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~fd731fb0.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~3f764be9.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~f734b0c6.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~bacacef5.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~10e2e882.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~ec8c427e.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~c8728516.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~ad597842.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~e73b60ec.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~9fa10dbc.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~ad45398f.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~4ba72edf.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~582877f5.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~eb873a61.9393a7a7ba7ed9888b77.js"></script><script type="text/javascript" src="./main~c714bc7b.9393a7a7ba7ed9888b77.js"></script></body><!-- The core Firebase JS SDK is always required and must be listed first --><script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-messaging.js"></script><!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries --><script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-analytics.js"></script><!-- <script>
    function showToken(a) {
        console.log(a);
    }
    firebase.initializeApp({
        apiKey: "AIzaSyBROSFdFQWbp8K2xMMjKaqazC4HP4grI5A",
        authDomain: "mc-bde.firebaseapp.com",
        projectId: "mc-bde",
        storageBucket: "mc-bde.appspot.com",
        messagingSenderId: "181659839939",
        appId: "1:181659839939:web:bd1bd39cb9b2232add6176",
        measurementId: "G-R7GER30TG2"
    });


    // messaging.usePublicVapidKey()

    function subscribe(messaging) {
        messaging.requestPermission()
            .then(function () {
                messaging.getToken()
                    .then(function (currentToken) {
                        console.log(currentToken);

                        if (currentToken) {
                            sendTokenToServer(currentToken);
                        }
                    })
                    .catch(function (err) {
                        setTokenSentToServer(false);
                    });
            })
            .catch(function (err) {
                console.warn('not granted', err);
            });
    }

    function sendTokenToServer(currentToken) {
        if (!isTokenSentToServer(currentToken)) {
            console.log('Отправка токена на сервер...');

            var url = '';
            $.post(url, {
                token: currentToken
            });

            setTokenSentToServer(currentToken);
        }
    }

    function isTokenSentToServer(currentToken) {
        return window.localStorage.getItem('sentFirebaseMessagingToken') == currentToken;
    }

    function setTokenSentToServer(currentToken) {
        window.localStorage.setItem(
            'sentFirebaseMessagingToken',
            currentToken ? currentToken : ''
        );
    }


    if ('Notification' in window) {
        navigator.serviceWorker.register("./firebase-messaging-sw.js")
            .then((registration) => {
                var messaging = firebase.messaging();
                messaging.useServiceWorker(registration);
                console.log(messaging);
                if (Notification.permission === 'granted') {
                    subscribe(messaging);
                    messaging.onMessage(function (payload) {
                        console.log('Message received. ', payload);
                    });
                }

                $('#subscribe').on('click', function () {
                    subscribe(messaging);
                });
            });

    }

</script> --></html>